{% extends "layout.html" %}

{% block title %}
Profile
{% endblock %}

{% block content %}
<div class="row justify-content-center mt-4">
    <div class="card shadow-lg rounded bg-card w-50 card-txt1">

        <div class="mb-4 card-header">
            <h2 class="text-center ">User Information</h2>
        </div>

        <div class="card-body py-4">
            <p class="card-text"><strong>Name:</strong> {{ user.name }}</p>
            <p class="card-text"><strong>Username:</strong> {{ user.username }}</p>
            <p class="card-text"><strong>Email:</strong> {{ user.email }}</p>
            <p class="card-text"><strong>Joined:</strong> {{ date }}</p>

            {% if session.type == user.user_type %}
            <a href="/settings" class="btn btn-primary">Edit Profile</a>
            {% endif %}
        </div>
    </div>
</div>

<div class=" row justify-content-center mt-4">

    <div class="card shadow-lg rounded bg-card w-50 card-txt1" style="min-height: 200px;">

        <div class="card-body bg-card d-flex flex-column align-items-start">
            <h2 class="card-title mb-4">Donation History</h2>
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-dark align-middle">
                    <thead class="thead-dark">
                        <tr>
                            <!--<th>Request ID</th>-->
                            <th>Post Header</th>
                            <th>Post Content</th>
                            <th>Donor</th>
                            <th>Recipient</th>
                            <th>Request Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for donation in donations %}
                        <tr>
                            <!--<td>{{ request.id }}</td>-->
                            <td>{{ donation.post_header }}</td>
                            <td>{{ donation.post_content }}</td>
                            <td>
                                {{ donation.d_name}}
                                <small>{{ donation.donor_username }}</small>
                            </td>
                            <td>
                                {{ donation.r_name}}
                                <small>{{ donation.recipient_username }}</small>
                            </td>
                            <td>{{ donation.request_date }}</td>
                        </tr>


            </div>
            </tr>
            {% endfor %}
            </tbody>
            </table>

            {% if not donations %}
            <h2 class="card-title mb-2 ">No Past Donations</h2>
            {% endif %}
        </div>
        {% if session.type == user.user_type %}
        <a class="btn btn-primary" href="/history">View Post History</a>
        {% endif %}
    </div>



</div>
{% endblock %}